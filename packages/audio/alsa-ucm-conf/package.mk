# SPDX-License-Identifier: GPL-2.0-or-later
# Copyright (C) 2020-present Team LibreELEC (https://libreelec.tv)

PKG_NAME="alsa-ucm-conf"
PKG_VERSION="1.2.3"
PKG_SHA256="1bc24da04bb27a75e323c9f0fb03e44705b6bb8a8baf255b94b41d457d590d00"
PKG_LICENSE="BSD-3c"
PKG_SITE="http://www.alsa-project.org/"
PKG_URL="ftp://ftp.alsa-project.org/pub/lib/alsa-ucm-conf-$PKG_VERSION.tar.bz2"
PKG_LONGDESC="ALSA Use Case Manager configuration (and topologies)"
PKG_TOOLCHAIN="manual"

makeinstall_target() {
  mkdir -p ${INSTALL}/usr/share/alsa/
  if [ "$DEVICE" == "Switch" ]; then
    sed -i '0,/Directory "${CardDriver}"/{s/Directory "${CardDriver}"/Directory "${CardLongName}"/}' ${PKG_BUILD}/ucm2/ucm.conf
  fi
  cp -PR ${PKG_BUILD}/ucm2 ${INSTALL}/usr/share/alsa/
  safe_remove ${INSTALL}/usr/share/alsa/ucm2/README.md
}
